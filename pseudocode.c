sem-reader[segme] = 0;
sem-writer[segme] = 0;
mutex = 0

void readers(){
    while(i++){
        segm = rand();
        

        
        read and write on file
    }

}

void writers(){
    requests[segments];
    while (1){
        
        read-request

        if(shm-req-segm <> shm-req-segm ){
            down(sem-writer[shm-req-segm])
            write segm;
        }
    }
    
    
    

}